<% 
filetype = "Filetype: #{current_asset.attachment_mime_type}<br />"
unless current_asset.attachment_width.nil? || current_asset.attachment_height.nil?
	dimensions = "Original dimensions: #{current_asset.attachment_width}x#{current_asset.attachment_height}<br />"
end
%>
<div id="asset-detail">
	<% if ['image/png','image/jpeg','image/gif'].include?(current_asset.attachment_mime_type) %>
		<div class="cj"><%= image_tag current_asset.attachment.thumb('500x250>').url, :title => current_asset.attachment_name %></div>
		<%= image_tag '/assets/admin/focal_point.png', :id => 'focus' %>
		<%= form_for current_asset, :url => update_gravity_thing_path(current_asset), :method => :post, :remote => true, :html => {:id => 'edit_gravity'} do |f| %>
			<%= f.hidden_field :attachment_gravity %>
		<% end %>
	<% elsif current_asset.attachment_mime_type == 'application/pdf' %>
		<iframe src="<%= current_asset.attachment.url %>" style="width:500px;height:350px;" frameborder="0"></iframe>
	<% elsif current_asset.attachment_mime_type == 'application/x-shockwave-flash' %>
	  <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
	          width="400"
	          height="400"
	          id="mySWF" >
	  <param name="movie" value="<%= current_asset.attachment.url %>"/>
	  <param name="allowScriptAccess" value="always" />
	  <param name="quality" value="high" />
	  <param name="scale" value="noscale" />
	  <param name="bgcolor" value="#FFFFFF">
	  <embed src="<%= current_asset.attachment.url %>"
	         width="400"
	         height="400"
	         name="mySWF"
	         quality="high"
	         allowScriptAccess="always"
	         type="application/x-shockwave-flash"
	         pluginspage="http://www.macromedia.com/go/getflashplayer"
	         bgcolor="#FFFFFF"
	  />
	  </object>	
	<% end %>
	<hr />
	<%# link_to "Destroy", thing_path(@current_asset), :confirm => "Are you sure?", :method => :delete, :class => 'delete' %>
	<%= content_tag :p, "#{link_to current_asset.attachment_name, current_asset.attachment.url} #{clippy current_asset.attachment.url}<br />#{dimensions}#{filetype}Uploaded #{time_ago_in_words(current_asset.created_at)} ago".html_safe %>
	<hr />
	<%= show_flashes %>

	<div id="colorpicker"></div>
	<%= form_for current_asset, :url => update_color_thing_path(current_asset), :method => :post, :remote => true do |f| %>
		<p><%= f.label :color, 'Border Color' %><br />
		<%= f.text_field :color, :value => (current_asset.color.blank? ? '#FFFFFF' : current_asset.color), :class => 'text' %></p>
		<p><%= f.submit 'Update Asset' %></p>
	<% end %>

	<script>
	$(document).ready(function() {
		$('#colorpicker').farbtastic('#asset_color');
	});
	</script>
	
</div>